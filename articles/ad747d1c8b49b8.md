---
title: "ã‚¼ãƒ­ã‹ã‚‰Vivliostyleã§ãƒ¬ãƒãƒ¼ãƒˆã‚’æ›¸ãã¾ã§ â‘¡ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºç·¨"
emoji: "ğŸ“™"
type: "tech"
topics:
  - "scss"
  - "markdown"
  - "å…¥é–€"
  - "ç’°å¢ƒæ§‹ç¯‰"
  - "vivliostyle"
published: true
published_at: "2022-10-16 17:40"
---

ä»Šå›ã®ãƒªãƒã‚¸ãƒˆãƒªã¯ã“ã¡ã‚‰ã€‚
https://github.com/kaiware0x/VivliostyleSample

ç’°å¢ƒæ§‹ç¯‰ã«ã¤ã„ã¦ã¯æ¬¡ã®è¨˜äº‹ã‚’å‚ç…§ã€‚
https://zenn.dev/kaiware0x/articles/24656cdb4c4462

# ãƒ†ãƒ¼ãƒãƒ•ã‚©ãƒ«ãƒ€ã®ã‚³ãƒ”ãƒ¼

å‰å›ã®è¨˜äº‹ã§ä½¿ç”¨ã—ãŸãƒ†ãƒ¼ãƒã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã„ãã€‚

`themes/packages/@vivliostyle/theme-academic` 

ã‚’

`themes/theme-academic-custom` ã¸ã‚³ãƒ”ãƒ¼ã€‚

ã¾ãŸã€`vivliostyle.config.js`ã®ãƒ†ãƒ¼ãƒã¸ã®ãƒ‘ã‚¹ã‚‚æ›¸ãæ›ãˆã‚‹ã€‚

```jsx
theme: 'themes/theme-academic-custom', // .css or local dir or npm package. default to undefined.
```

![](https://storage.googleapis.com/zenn-user-upload/5a5aa9f956e5-20221016.png)

`npm run build`ã‚’å®Ÿè¡Œã—ã€å‰å›ã¨åŒæ§˜ã®pdfãƒ•ã‚¡ã‚¤ãƒ«ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã®ã‚’ç¢ºèªã™ã‚‹ã€‚

# manuscripts(åŸç¨¿)ã®è¿½åŠ 

`mybook/manuscripts`ãƒ•ã‚©ãƒ«ãƒ€ã‚’æ–°è¦ä½œæˆã€‚ åŸç¨¿(.mdãƒ•ã‚¡ã‚¤ãƒ«)ã¯ä»Šå¾Œã“ã“ã«è¿½åŠ ã—ã¦ã„ãã€‚

![](https://storage.googleapis.com/zenn-user-upload/47deed91304b-20221016.png)

`cover.md`ã‚’æ–°è¦ä½œæˆã—ã€æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã€‚

```markdown
# ã‚¿ã‚¤ãƒˆãƒ« {.cover}

<div class="author">

- 2022/10/16
- æ™‚ä¾¡ç·é¡5000å…†å††æ ªå¼ä¼šç¤¾
- kai ware
- Twitter: @kai_ware4job

</div>
```

`toc.md`ã‚’æ–°è¦ä½œæˆã—ã€æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã€‚

```markdown
# -{hidden}

<nav id="toc" role="doc-toc">

## ç›®æ¬¡

- [ç›®çš„](microcomputer.html#ç›®çš„)
- [ãƒã‚¤ã‚³ãƒ³ã®åŸºæœ¬æ§‹é€ ](microcomputer.html#ãƒã‚¤ã‚³ãƒ³ã®åŸºæœ¬æ§‹é€ )
- [å®Ÿé¨“æ‰‹é †](microcomputer.html#å®Ÿé¨“æ‰‹é †)
- [å®Ÿé¨“çµæœ](microcomputer.html#å®Ÿé¨“çµæœ)
- [è¿½è¨˜](microcomputer.html#è¿½è¨˜)

</nav>
```

`microcomputer.md`ã¯ä»¥å‰ã®ã‚µãƒ³ãƒ—ãƒ«ã®ä¸­èº«ã‹ã‚‰åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã—ã€å…ˆé ­ã®éƒ¨åˆ†ã‚’å‰Šé™¤ã™ã‚‹ã€‚

![](https://storage.googleapis.com/zenn-user-upload/1c828f35430d-20221016.png)

`vivliostyle.config.js`ã®`entry`ã¨`entryContext`ã‚’ä¿®æ­£ã—ã€mdãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç™»éŒ²ã™ã‚‹ã€‚

![](https://storage.googleapis.com/zenn-user-upload/5f662e68e2db-20221016.png)

`npm run build`ã‚’å®Ÿè¡Œã—ã¦ã€pdfã«è¡¨ç´™ã¨ç›®æ¬¡ãŒã§ãã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã€‚

![](https://storage.googleapis.com/zenn-user-upload/59a08fa631ff-20221016.png)

:::message
2023/03/11è¿½è¨˜
manuscriptsãƒ•ã‚©ãƒ«ãƒ€ã«themeãƒ•ã‚©ãƒ«ãƒ€ãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã¦ãã‚‹ã®ã§ã€Rootãƒ•ã‚©ãƒ«ãƒ€ã«ã„ã‚‹themeãƒ•ã‚©ãƒ«ãƒ€ã¯æ¶ˆã—ã€ä»¥é™ã¯`manuscripts/theme`ã®CSSã‚’ç·¨é›†ã™ã‚‹ã€‚
:::


# ã‚¹ã‚¿ã‚¤ãƒ«ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

## Sassã‚³ãƒãƒ³ãƒ‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

:::details Sassã£ã¦ï¼Ÿ

https://ja.wikipedia.org/wiki/Sass

CSSã®æ‹¡å¼µè¨€èªã€‚ .sassãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã“ã¨ã§.cssãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã§ãã‚‹ã€‚

ä¼¼ãŸã‚ˆã†ãªã‚‚ã®ã«.scssã‚‚ã‚ã‚Šã€ã“ã¡ã‚‰ã®ã»ã†ãŒæ™®åŠã—ã¦ã„ã‚‹ã‚‰ã—ã„ã€‚ ä»Šå›ã¯scssãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸»ã«æ‰±ã†ã€‚

ã¾ãŸã€sassã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŒã€ã“ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚‚scssãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã§ãã‚‹ã€‚ 

:::

`sass`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚ åŒæ§˜ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«`node-sass`ãŒã‚ã‚‹ãŒã€ã“ã¡ã‚‰ã¯éæ¨å¥¨ã‚‰ã—ã„ã€‚

```
npm install sass
```

4ã¤è„†å¼±æ€§ã®è­¦å‘ŠãŒå‡ºã‚‹ãŒã€ã“ã‚Œã‚’ä¿®æ­£ã™ã‚‹ã¨vivliostyleã®buildãŒé€šã‚‰ãªããªã‚‹ã®ã§æ”¾ç½®ã€‚

`package.json`ã‚’ç·¨é›†ã—ã€`sass`ã‚³ãƒãƒ³ãƒ‰ã‚’ç™»éŒ²ã™ã‚‹ã€‚ ã“ã‚Œã«ã‚ˆã‚Šã€`npm run sass`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚

```json
"sass": "sass themes/theme-academic-custom/scss:themes/theme-academic-custom --no-source-map --watch"
```

![](https://storage.googleapis.com/zenn-user-upload/2b6fd48d75fe-20221016.png)

ç™»éŒ²ã—ãŸã‚³ãƒãƒ³ãƒ‰ã®`--watch`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦scssãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´ãŒç›£è¦–ã•ã‚Œã€é€ä¸€cssã¸ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã‚‹ã€‚

watchã‹ã‚‰æŠœã‘ã‚‹ã«ã¯ã€`Ctrl+C`ã€‚

æ¬¡ã‹ã‚‰ã€ã‚³ãƒ”ãƒ¼ã—ãŸãƒ†ãƒ¼ãƒãƒ•ã‚©ãƒ«ãƒ€å†…ã®`scss`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿®æ­£ã—ã¦ã„ãã€‚

## ãƒ˜ãƒƒãƒ€ãƒ»ãƒ•ãƒƒã‚¿ã®å¤‰æ›´

`npm run sass`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€scssã®ç›£è¦–ã‚’ã‚ªãƒ³ã«ã—ã¦ãŠãã€‚

`scss/_variables.scss`ãƒ•ã‚¡ã‚¤ãƒ«ã®ä»¥ä¸‹ã®å¤‰æ•°ã‚’å¤‰æ›´ã™ã‚‹ã€‚

![](https://storage.googleapis.com/zenn-user-upload/cd71cefdd3fc-20221016.png)

`npm run build`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒ˜ãƒƒãƒ€ã¨ãƒ•ãƒƒã‚¿ã«æ–‡å­—ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚

![](https://storage.googleapis.com/zenn-user-upload/2f1948fdfd3e-20221016.png)

![](https://storage.googleapis.com/zenn-user-upload/907564e99cf6-20221016.png)

## ç›®æ¬¡ã®ã‚¹ã‚¿ã‚¤ãƒ«ã®å¤‰æ›´

å‚è€ƒï¼š[Vivliostyle Viewer ã§ CSS çµ„ç‰ˆã¡ã‚‡ã£ã¨å…¥é–€](https://vivliostyle.github.io/vivliostyle_doc/ja/vivliostyle-user-group-vol1/shinyu/index.html)

`npm run sass`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€scssã®ç›£è¦–ã‚’ã‚ªãƒ³ã«ã—ã¦ãŠãã€‚

`theme-academic-custom/scss`ã«ã€`_toc.scss`ã‚’æ–°è¦ä½œæˆã€‚

ã¾ãŸã€`theme_common.scss`ã§`_toc.scss`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’importã™ã‚‹ã€‚

![](https://storage.googleapis.com/zenn-user-upload/7f7ee42b3c03-20221016.png)

`_toc.scss`ã‚’æ¬¡ã®ã‚ˆã†ã«ç·¨é›†ã™ã‚‹ã€‚

```scss
/* ----------
 * TOC
 * ----------
*/
@page toc_page {
    counter-increment: none;

    @top-left {
        content: '';
    }

    @top-right {
        content: '';
    }

    @bottom-left {
        content: '';
    }

    @bottom-right {
        content: '';
    }

    @bottom-center {
        content: '';
    }
}

#toc {
    page: toc_page;

    li {
        list-style: none;

        ol {
            padding-left: 1em;
        }

        a {
            display: inline-flex;
            width: 100%;
            text-decoration: none;
            color: currentColor;
            align-items: baseline;

            ::before {
                margin-left: 0.5em;
                margin-right: 0.5em;
                border-bottom: 1px dotted;
                content: '';
                order: 1;
                flex: auto;
            }

            ::after {
                text-align: right;
                counter-increment: page -1;
                content: target-counter(attr(href), page);
                align-self: flex-end;
                flex: none;
                order: 2;
            }
        }
    }

    h2::before {
        content: '';
    }
}

@page :first {
    /* FIXME: ã‚¿ã‚¤ãƒˆãƒ«ã¨ç›®æ¬¡ã®ãƒšãƒ¼ã‚¸ã‹ã‚‰é€†ç®—ã—ã¦ãƒšãƒ¼ã‚¸ã‚«ã‚¦ãƒ³ã‚¿ã‚’èª¿æ•´ */
    counter-reset: page -2;
}
```

`npm run build`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ç›®æ¬¡ã«ç‚¹ç·šã¨ãƒšãƒ¼ã‚¸ç•ªå·ãŒã¤ã„ã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚‹ã€‚

ã¾ãŸã€å„é …ç›®ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ãã®ãƒšãƒ¼ã‚¸ã«é£›ã¹ã‚‹ã€‚

![](https://storage.googleapis.com/zenn-user-upload/19f0735a49b8-20221016.png)

## ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚¹ã‚¿ã‚¤ãƒ«ã®å¤‰æ›´

å‚è€ƒï¼š[https://vivliostyle.org/ja/tutorials/configure-basic-elements/](https://vivliostyle.org/ja/tutorials/configure-basic-elements/)

`npm run sass`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€scssã®ç›£è¦–ã‚’ã‚ªãƒ³ã«ã—ã¦ãŠãã€‚

ãã®ã¾ã¾ã®çŠ¶æ…‹ã ã¨Syntax  HighlightãŒç„¡ãã€ã‚³ãƒ¼ãƒ‰ãŒè¦‹ã¥ã‚‰ã„ã€‚

`scss/_code.scss` ã‚’ç·¨é›†ã—ã¦ã„ãã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«ã€`add`ã¨æ›¸ã„ã¦ã‚ã‚‹éƒ¨åˆ†ã‚’è¿½åŠ ã€‚

```scss
/* ----------
 * Code
 * ----------
*/

@import 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/themes/prism.min.css'; // add

code,
kbd,
pre,
samp {
  font-family: $font-monospace;
}

pre {
  tab-size: 4;
  box-decoration-break: clone;
  text-align: left;
  white-space: pre-wrap;
  margin: 0pt; // add
}

*:not(pre)>code {
  color: $color-gray;
  font-weight: bold;
  padding: 0pt 2pt;
  border-radius: 1pt;
  background-color: $color-light-gray;
}

// add ->
code {
  background-color: #f6f6f6;
  padding: 0 3pt;
}

figure[class^='language-'] {
  margin: 0.5em 0;
}

figcaption {
  background-color: #e6e6e6;
}
// <- add
```

`npm run build`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ãƒã‚¤ãƒ©ã‚¤ãƒˆãŒã¤ã„ã¦è¦‹ã‚„ã™ããªã£ãŸã“ã¨ãŒã‚ã‹ã‚‹ã€‚

ã¾ãŸã€ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã«ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æŒ‡å®šã™ã‚‹ã¨å›³ç•ªå·ã‚’è¡¨ç¤ºã—ã¦ãã‚Œã‚‹ã€‚

ä¾‹ï¼š

```markdown
```c:app.c
#include<stdio.h>
...
```

![](https://storage.googleapis.com/zenn-user-upload/b8b7f5a644e0-20221016.png)

## Headingã®ã‚¹ã‚¿ã‚¤ãƒ«ã®å¤‰æ›´

`npm run sass`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€scssã®ç›£è¦–ã‚’ã‚ªãƒ³ã«ã—ã¦ãŠãã€‚

ç¯€ç•ªå·éƒ¨åˆ†ã«ç¸¦æ£’ã‚„ä¸‹ç·šã‚’è¿½åŠ ã—ãŸã„ã€‚

`scss/_base.scss`ã‚’ç·¨é›†ã—ã¦ã„ãã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«ã€`add`ã¨æ›¸ã„ã¦ã‚ã‚‹éƒ¨åˆ†ã‚’è¿½åŠ ã€‚

```scss
/* ----------
 * Base - Headings
 * ----------
*/

h1 {
  margin: 8pt auto 4pt;
  font-size: 20pt;
  line-height: 1.5;
  text-align: center;
}

h2 {
  margin: 8pt auto 4pt;
  font-size: 14pt;
  border-bottom: solid 1px rgb(100, 100, 100); // add

  &:before {
    font-size: 14pt;
    border-left: solid 7px rgb(0, 51, 102); // add
  }
}

h3 {
  margin: 4pt auto 2pt;
  font-size: 12pt;
  border-bottom: solid 1px rgb(200, 200, 200); // add

  &:before {
    font-size: 12pt;
    border-left: solid 4px rgb(100, 100, 100); // add
  }
}

h4 {
  margin: 4pt auto 2pt;
  font-size: 10pt;
  border-bottom: solid 1px rgb(200, 200, 200); // add

  &:before {
    font-size: 10pt;
  }
}
```

`scss/_counter.scss` ã‚’ç·¨é›†ã—ã¦ã„ãã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«ã€`modify`ã¨æ›¸ã„ã¦ã‚ã‚‹éƒ¨åˆ†ã‚’ä¿®æ­£ã€‚

```scss
/* ----------
 * Counter - Headings
 * ----------
 * h1: chapter
 * h2: section
 * h3: subsection
 * h4: subsubsection
*/

h1 {
  counter-reset: section table figure footnote ref;
  /* reset all counters */
}

h2 {
  counter-reset: subsection;
  /* reset counters of lower levels */
  counter-increment: section;
  /* increment counters of current level */

  &:before {
    content: 'ã€€' counter(section); // modify
  }
}

h3 {
  counter-reset: subsubsection;
  /* reset counters of lower levels */
  counter-increment: subsection;
  /* increment counters of current level */

  &:before {
    content: 'ã€€' counter(section) '.' counter(subsection); // modify
  }
}

h4 {
  counter-increment: subsubsection;
  /* increment counters of current level */

  &:before {
    content: counter(section) '.' counter(subsection) '.' counter(subsubsection);
  }
}
```

`npm run build`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ç¯€éƒ¨åˆ†ã«ç¸¦æ£’ã‚„ä¸‹ç·šã‚’è¿½åŠ ã§ãã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚‹ã€‚

![](https://storage.googleapis.com/zenn-user-upload/a5dd4a4bb43f-20221016.png)

## ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«ã®è¿½åŠ 

`npm run sass`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€scssã®ç›£è¦–ã‚’ã‚ªãƒ³ã«ã—ã¦ãŠãã€‚

`scss/_title.scss` ã‚’ç·¨é›†ã—ã¦ã„ãã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«ã€`add`ã¨æ›¸ã„ã¦ã‚ã‚‹éƒ¨åˆ†ã‚’è¿½åŠ ã€‚

```scss
/* ----------
 * Cover
 * ----------
*/

ï¼ˆé€”ä¸­ç•¥ï¼‰

.cover {
  page: cover;
  break-after: page;
  height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;

  .author {
    ul {
      text-align: center;
    }
  }

  // add ->
  .subtitle {
    text-align: center;
    font-family: 'Hiragino Kaku Gothic ProN', sans-serif;
    font-size: large;
    font-weight: bold;
    margin-top: -300px;
    margin-bottom: 300px;
  }
  // <- add
}
```

ã¾ãŸã€`manuscripts/cover.md`ã‚’æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã€‚

```markdown
# ã‚¼ãƒ­ã‹ã‚‰Vivliostyleã§ãƒ¬ãƒãƒ¼ãƒˆã‚’æ›¸ãã¾ã§ {.cover}

<div class="subtitle">
    â‘¡ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºç·¨
</div>

<div class="author">

- 2022/10/16
- æ™‚ä¾¡ç·é¡5000å…†å††æ ªå¼ä¼šç¤¾
- kai ware
- Twitter: @kai_ware4job

</div>
```

`npm run build`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¿½åŠ ã§ããŸã“ã¨ãŒã‚ã‹ã‚‹ã€‚

![](https://storage.googleapis.com/zenn-user-upload/2e1154795598-20221016.png)

# ã¾ã¨ã‚ã¨ä»Šå¾Œã®èª²é¡Œ

cssã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã“ã¨ã§è¦‹æ „ãˆã®è‰¯ã„ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ããŸã€‚

ãŸã ã€ç›®æ¬¡ãŒæ‰‹å‹•å…¥åŠ›ã§ç¯€ç•ªå·ãªã©ãŒæŒ¯ã‚Œã¦ã„ãªã„ã“ã¨ãŒã¾ã ç‰©è¶³ã‚Šãªã„ã€‚